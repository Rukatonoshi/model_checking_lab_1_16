# Лабораторная работа

> Пожарная сигнализация
>
> Подаётся звуковой сигнал, когда есть дым, пламя, нажата тревожная кнопка.
> После этого включается система пожаротушения, которая работает заданное
> время, или пока не закончится пожаротушительная смесь, или пока эту систему не
> отключат вручную.

----
## Верификация моделей в nuXmv

**1. Соответствие требованиям к системе:**
- [✓] **Процесс управляющего алгоритма**: модуль `alarm_controller` с комплексной логикой управления
- [✓] **Процессы датчиков**: 3 модуля `sensor` (дым, пламя, кнопка) с недетерминированной активацией
- [✓] **Процессы актуаторов**: 
  - Звуковая сигнализация (`alarm_on`)
  - Система пожаротушения (`fire_suppression_on`) с таймером и уровнем смеси
- [✓] **Процесс среды**: модуль `environment` с 4 недетерминированными генераторами событий
- [✓] **Бесконечная работа**: 9 условий `JUSTICE` и `FAIRNESS running` для всех процессов

**2. Усовершенствованный функционал:**
- [✓] Трехуровневая система проверок:
  1. Базовые свойства (простые инварианты)
  2. Углубленные темпоральные свойства (LTL/CTL)
  3. Дополнительные гарантии работы
- [✓] Комплексные условия активации/деактивации:
  ```smv
  next(fire_suppression_on) := 
      case
          manual_override : FALSE;    -- Ручное
          mixture_level = 0 : FALSE;  -- Смесь
          suppression_timer = 0 : FALSE; -- Время
          ...
      esac;
  ```

**3. Группировка свойств:**
1. **Безопасность** (инварианты):
   - Корректность состояний системы
   - Условия активации

2. **Живучесть** (LTL):
   - Гарантии завершения работы
   - Минимальное время работы
   - Реакция на события

3. **Возможности** (CTL):
   - Достижимость состояний
   - Возможность повторной активации
   - Альтернативные пути выполнения

**4. Проверка выполнения условий G(p → Ф):**
Для всех свойств вида "если p, то Ф" обеспечено:
- `JUSTICE`-условия для бесконечного выполнения p
- Недетерминированность входов:
  ```smv
  next(generate_smoke) := {TRUE, FALSE}; // И аналоги для других
  ```
- Контроль через `FAIRNESS running`

**5. Дополнительные гарантии:**
- Проверка пограничных значений (таймер < 3, смесь < 20%)
- Тестирование конфликтных ситуаций (ручное отключение при работе)
- Верификация восстановления после сбоев
- Проверка минимального времени реакции

----
## Лабораторная работа №2: Верификация моделей в SPIN

### 1. Соответствие требованиям к системе:
- [✓] **Процесс управляющего алгоритма**: модуль `Controller`
- [✓] **Процессы датчиков**: модуль `Sensors` (получает данные от `Environment`)
- [✓] **Процессы актуаторов**: модуль `Actuators`
- [✓] **Процесс среды/пользователя**: модуль `Environment` с циклической генерацией событий
- [✓] **Бесконечная работа**: все процессы используют бесконечные циклы `do...od`

### 2. Реализация функционала пожарной сигнализации:
- [✓] Звуковой сигнал при событиях:
  ```promela
  (signal == smoke_detected || signal == flame_detected || signal == panic_pressed) 
  -> ctrl_to_actuators!alarm_on
  ```
- [✓] Система пожаротушения с тремя условиями остановки:
  ```promela
  :: signal == override_signal -> ctrl_to_actuators!suppression_stop  // Ручное
  :: mixture_level == 0 -> ctrl_to_actuators!suppression_stop        // Нет смеси
  :: suppression_timer == 0 -> ctrl_to_actuators!suppression_stop    // Таймер
  ```

### 3. Свойства с разной темпоральной структурой:
1. **Инвариант** (глобальное условие):
   ```promela
   [] (mixture_level == 0 -> !suppression_active)
   ```
2. **LTL-свойство реакции**:
   ```promela
   [] (p -> <> q)  // Если произошло p, то в будущем будет q
   ```
3. **LTL-свойство возможности**:
   ```promela
   [] (alarm_active -> <> override_signal_received)
   ```
4. **LTL-свойство завершения**:
   ```promela
   [] (p -> (p U q))  // p будет истинно, пока не станет истинно q
   ```

### 4. Проверка выполнения условий:
Для свойства `alarm_activation_guarantee`:
- Условие `p` выполняется бесконечно часто благодаря:
  ```promela
  :: env_to_sensors!smoke_detected
  :: env_to_sensors!flame_detected
  :: env_to_sensors!panic_pressed
  ```
- Fairness гарантируется циклической генерацией событий в `Environment`

### 5. Дополнительные гарантии:
- Недетерминированные задержки:
  ```promela
  if :: skip :: skip :: skip fi
  ```
- Проверка пограничных условий:
  ```promela
  :: mixture_level >= consumption_rate -> ...
  :: else -> ctrl_to_actuators!suppression_stop
  ```
